{% extends "layout.html" %}

{% block body %}
<form role="form" method="POST" enctype="multipart/form-data" action="{{ url_for('upload') }}">
  <div class="panel panel-default center">
    <div class="panel-heading">Cambiar imagen de perfil</div>
    <div class="panel-body"> 
      <input type="file" class="hidden" id="image" name="image" />
      <img class="img-thumbnail image avatar-jumbo" id="chooser" name="chooser" src="{{ image }}" />
    </div>
    <div class="panel-footer">
      <button type="submit" value="submit_image" class="btn btn-primary pull-right">Subir imagen</button>
      <div class="clearfix"></div>
    </div>
  </div>
</form>
<form role="form" method="POST">
  <div class="panel panel-default center">
    <div class="panel-heading">Editar perfil</div>
    <div class="panel-body">
      <div class="form-group {% if form.username.errors %}has-error has-feedback{% endif %}">
        <input type="text" class="form-control" id="username" name="username" placeholder="Nombre de usuario" value="{{ form.username.data }}">
      </div>
      <div class="form-group {% if form.firstname.errors %}has-error has-feedback{% endif %}">
        <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Nombre" value="{{ form.firstname.data }}">
      </div>
      <div class="form-group {% if form.lastname.errors %}has-error has-feedback{% endif %}">
        <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Apellidos (opcional)" value="{{ form.lastname.data }}">
      </div>
      <div class="form-group {% if form.email.errors %}has-error has-feedback{% endif %}">
        <input type="text" class="form-control" id="email" name="email" placeholder="Email" value="{{ form.email.data }}">
      </div>
      <div class="form-group {% if form.location.errors %}has-error has-feedback{% endif %}">
        <input type="text" class="form-control" id="location" name="location" placeholder="Ubicación" {% if form.location.data %}value="{{ form.location.data }}"{% endif %}>
      </div>
      <div class="form-group {% if form.password.errors %}has-error has-feedback{% endif %}">
        <input type="password" class="form-control" id="password" name="password" placeholder="Nueva contraseña">
      </div>
      <div class="form-group {% if form.password.errors %}has-error has-feedback{% endif %}">
        <input type="password" class="form-control" id="confirm" name="confirm" placeholder="Confirma la contraseña">
      </div>

      {% if form.errors %}
      <div class="form-error">
        <span class="glyphicon glyphicon-remove"></span>
        {% for error, messages in form.errors.iteritems() %}
          {% for message in messages %}
            {{ message }}
          {% endfor %}
        {% endfor %}
      </div>
      {% endif %}
    </div>
    <div class="panel-footer">
      <button type="submit" value="submit_data" class="btn btn-primary pull-right">Actualizar</button>
      <div class="clearfix"></div>
    </div>
  </div>
</form>

{% endblock %}
